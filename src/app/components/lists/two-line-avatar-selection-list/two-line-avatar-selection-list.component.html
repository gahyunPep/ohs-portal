<mat-selection-list
  (selectionChange)="
    onSelectionChange($event, avatarList.selectedOptions.selected)
  "
  color="primary"
  disableRipple="true"
  #avatarList
>
  <mat-list-option
    class="list"
    *ngFor="let item of listItems"
    value="{{ item.itemText }}"
    [ngClass]="{
      selected: selectedItems.includes(item.itemText),
      unselected: !selectedItems.includes(item.itemText)
    }"
  >
    <img matListAvatar src="{{ item.avatar }}" alt="avatar" />
    <p matLine class="primary">{{ item.itemText }}</p>
    <p matLine class="secondary">{{ item.secondaryText }}</p>
  </mat-list-option>
</mat-selection-list>

<p>
  {{ avatarList.selectedOptions.selected.length }}
</p>
